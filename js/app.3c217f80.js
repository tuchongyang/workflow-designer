(function(){"use strict";var e={95069:function(e,t,n){var o=n(49242),a=n(73396);const i=e=>((0,a.dD)("data-v-f2058774"),e=e(),(0,a.Cn)(),e),r={class:"tool-bar"},l=i((()=>(0,a._)("div",{class:"title"},"流程设计器",-1))),d=[l];function s(e,t){return(0,a.wg)(),(0,a.iD)("div",r,d)}var c=n(40089);const p={},h=(0,c.Z)(p,[["render",s],["__scopeId","data-v-f2058774"]]);var g=h,m=n(44870),u=n(87139);const y={class:"card-box"},f={class:"head"},b={class:"body"};var x={props:{title:String},setup(e){const t=e;return(e,n)=>((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",f,(0,u.zw)(t.title),1),(0,a._)("div",b,[(0,a.WI)(e.$slots,"default")])]))}};const v=(0,c.Z)(x,[["__scopeId","data-v-76b3452a"]]);var w=v,M=n(1373);function L(e){return Number(Math.random().toString().substr(3,6)+Date.now()).toString(36).substr(0,e)}function X(e){let t=e.offsetTop,n=e.offsetLeft,o=e;for(t=o.offsetTop,n=o.offsetLeft;o=o.offsetParent;)t+=o.offsetTop,n+=o.offsetLeft;return{left:n,top:t}}function k(e){if(!e||e instanceof Date||e instanceof File||"object"!==typeof e)return e;const t=e.constructor===Array?[]:{};return Object.keys(e).forEach((n=>{e[n]&&"object"===typeof e[n]?t[n]=k(e[n]):t[n]=e[n]})),t}const C=(0,M.Z)(),z={class:"node-elements"},P=["data-info","data-index"],S=["src"],Y={class:"txt"};var N={props:{materials:{type:Array,default(){return[]}}},setup(e){const t=e,n={startX:0,startY:0,moveable:!1,cloneEle:null,moduleType:"",isIn:!1},o=e=>{var t=e.target.getAttribute("data-info"),o=t.split("|"),a=document.createElement("div"),i=X(e.target);return a.setAttribute("style",`width:65px;height:65px;border-radius:3px;position:absolute;z-index:90;padding:5px 0;text-align:center;font-size:12px;color: #a6a6a6;opacity: .8;box-shadow: 0 0 5px rgba(0,0,0,.3);cursor:pointer;box-sizing:border-box;padding-bottom:5px;top:${i.top}px;left:${i.left}px`),a.innerHTML=`<div class="icon" style="display:inline-block;line-height:1;vertical-align:top; margin: 0 0 5px;"><img src="${o[1]}" style="vertical-align:top;" width="32" height="30"></div><div class="name">${o[0]}</div>`,document.body.appendChild(a),n.startL=i.left,n.startT=i.top,n.moduleType=o[2],n.index=e.target.getAttribute("data-index"),a},i=e=>{n.startX=e.pageX,n.startY=e.pageY,n.cloneEle=o(e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},r=e=>{e.preventDefault(),n.cloneEle.style.left=n.startL+e.pageX-n.startX+"px",n.cloneEle.style.top=n.startT+e.pageY-n.startY+"px",n.endX=e.pageX,n.endY=e.pageY},l=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",l),document.body.removeChild(n.cloneEle);var e=document.querySelector("#sketchpad"),o=X(e);if(n.endX>o.left&&n.endX<o.left+e.offsetWidth&&n.endY>o.top&&n.endY<o.top+e.offsetHeight){var a=t.materials[n.index],i={...a};i.x=n.endX-o.left,i.y=n.endY-o.top,C.emit("editor/add/node",k(i))}};return(e,n)=>((0,a.wg)(),(0,a.iD)("div",z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.materials,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"item",key:t,onMousedown:i,"data-info":e.label+"|"+e.icon,"data-index":t},[e.icon?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"icon",src:e.icon},null,8,S)):(0,a.kq)("",!0),(0,a._)("span",Y,(0,u.zw)(e.label),1)],40,P)))),128))]))}};const O=(0,c.Z)(N,[["__scopeId","data-v-d9c3b094"]]);var _=O;let E=[[0,0],[.5,0],[1,0],[.5,1],[1,1],[1,.5],[0,.5],[0,1]],A=function(){return{width:100,height:100,anchorPoints:E}},I=[{type:"start",label:"开始",width:40,height:40,anchorPoints:E,icon:n(92294),style:{fill:"#fdf6e7",stroke:"#fbad5a"}},{type:"apply",label:"申请节点",width:80,height:40,anchorPoints:E,icon:n(17628),style:{fill:"#e7feeb",stroke:"#9efeae"}},{type:"task",label:"审批节点",width:80,height:40,anchorPoints:E,icon:n(66180),style:{fill:"#e7f7fe",stroke:"#9ed2fe"}},{type:"exclusiveGateway",label:"排他网关",width:40,height:40,anchorPoints:E,icon:n(35137),style:{fill:"#e8fefa",stroke:"#1ac4c4"},labelCfg:{style:{opacity:0}}},{type:"end",label:"结束",width:40,height:40,anchorPoints:E,icon:n(97570),style:{fill:"#fce6e9",stroke:"#f46369"}}].map((e=>({...new A,...e,size:[e.width,e.height]})));var T=I;const B=e=>((0,a.dD)("data-v-43450416"),e=e(),(0,a.Cn)(),e),D={class:"panel-left"},F=B((()=>(0,a._)("div",{id:"minimap"},null,-1)));var Z={setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)("div",D,[(0,a.Wm)(w,{title:"基础节点"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{materials:(0,m.SU)(T)},null,8,["materials"])])),_:1}),(0,a.Wm)(w,{title:"导航器"},{default:(0,a.w5)((()=>[F])),_:1})]))}};const j=(0,c.Z)(Z,[["__scopeId","data-v-43450416"]]);var W=j;const $=e=>((0,a.dD)("data-v-16d08a4a"),e=e(),(0,a.Cn)(),e),G={class:"sketchpad-box"},q=$((()=>(0,a._)("div",{class:"sketchpad",id:"sketchpad"},null,-1))),H=[q];function R(e,t,n,o,i,r){return(0,a.wg)(),(0,a.iD)("div",G,H)}var Q={name:"SketchpadBox"};const U=(0,c.Z)(Q,[["render",R],["__scopeId","data-v-16d08a4a"]]);var J=U,K=n(90911),V={style:{default:{r:3,symbol:"circle",fill:"#FFFFFF",fillOpacity:0,stroke:"#1890FF",strokeOpacity:0,cursor:"crosshair"},hover:{fillOpacity:1,strokeOpacity:1},unhover:{fillOpacity:0,strokeOpacity:0},active:{fillOpacity:1,strokeOpacity:1},inactive:{fillOpacity:0,strokeOpacity:0}}},ee={style:{default:{r:10,symbol:"circle",fill:"#1890FF",fillOpacity:0,stroke:"#1890FF",strokeOpacity:0,cursor:"crosshair"},hover:{fillOpacity:1,strokeOpacity:1},unhover:{fillOpacity:0,strokeOpacity:0},active:{fillOpacity:.3,strokeOpacity:.5},inactive:{fillOpacity:0,strokeOpacity:0}}},te={style:{default:{stroke:"#000000",strokeOpacity:1},active:{shadowColor:"red",shadowBlur:4,shadowOffsetX:0,shadowOffsetY:0},inactive:{shadowColor:""}},type:{solid:{lineDash:[]},dashed:{lineDash:[5,5]},dot:{lineDash:[2,2]}}},ne={style:{default:{stroke:"#000000",strokeOpacity:1},active:{shadowColor:"#a6e9f3",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:0},inactive:{shadowColor:""},hovered:{fill:"#f2fcfd"},inhovered:{fill:"rgba(255,255,255,.7)"}},type:{solid:{lineDash:[]},dashed:{lineDash:[5,5]},dot:{lineDash:[2,2]}}},oe={startArrow:{},endArrow:{}},ae={style:{default:{point:{r:3,symbol:"square",fill:"#FFFFFF",fillOpacity:0,stroke:"#29B6F2",strokeOpacity:0},edge:{lineDash:[5,5],fillOpacity:0,stroke:"#29B6F2",strokeOpacity:0},rotate:{opacity:0}},active:{point:{fillOpacity:1,strokeOpacity:1},edge:{fillOpacity:0,strokeOpacity:1},rotate:{opacity:1}},inactive:{point:{fillOpacity:0,strokeOpacity:0},edge:{fillOpacity:0,strokeOpacity:0},rotate:{opacity:0}}}},ie={anchor:V,anchorBg:ee,line:te,node:ne,lineArrow:oe,shapeControl:ae};function re(e,t){const{anchorPoints:n,width:o,height:a,id:i}=e,r=t.find((e=>e.attr("name","base-shape")));if(n&&n.length)for(let l=0,d=n.length;l<d;l++){let e,s;if(r&&"path"===r.get("type")){const t=r.getPoint(l/d);e=t.x,s=t.y}else{const[t,i]=n[l],r=-o/2,d=-a/2;e=t*o+r,s=i*a+d}const c=t.addShape("marker",{id:i+"_anchor_bg_"+l,name:"anchorBg",attrs:{boxName:"anchor",name:"anchorBg",x:e,y:s,...ie.anchorBg.style["default"]},zIndex:100}),p=t.addShape("marker",{id:i+"_anchor_"+l,name:"anchorPoint",attrs:{boxName:"anchor",name:"anchorPoint",x:e,y:s,...ie.anchor.style["default"]}});p&&(p.on("mouseenter",(function(){c.attr({...ie.anchorBg.style.active})})),p.on("mouseleave",(function(){c.attr({...ie.anchorBg.style.inactive})})))}}function le(e,t,n){if("hover"===e||"selected"==e){let e=n.getContainer(),o=e.get("children")||[];for(let n=0,a=o.length;n<a;n++){let e=o[n];if(e.attrs&&e.attr("name"))switch(e.attr("name")){case"anchorPoint":t?(e.show(),e.attr(ie.anchor.style.hover)):(e.attr(ie.anchor.style.unhover),e.hide());break}}}}function de(e,t){let{anchorPoints:n,width:o,height:a,id:i}=e;const r=t.find((e=>e.attr("name","base-shape")));if(n&&n.length)for(let l=0,d=n.length;l<d;l++){let e,s;if(r&&"path"===r.get("type")){const t=r.getPoint(l/d);e=t.x,s=t.y}else{const[t,i]=n[l],r=-o/2,d=-a/2;e=t*o+r,s=i*a+d}let c=t.findById(i+"_anchor_bg_"+l),p=t.findById(i+"_anchor_"+l);c.attr({x:e,y:s}),p.attr({x:e,y:s})}}function se(e,t,n){let{anchorPoints:o,id:a}=e;if(o&&o.length)for(let i=0,r=o.length;i<r;i++){let e=t.findById(a+"_anchor_bg_"+i),o=t.findById(a+"_anchor_"+i);e&&(e.resetMatrix(),e.rotate(n)),o&&(o.resetMatrix(),o.rotate(n))}}var ce={draw:re,setState:le,update:de,rotate:se};function pe(e,t,n){if("active"===e){let e=n.getContainer(),o=e.get("children"),a=o&&o[0];a&&(t?a.attr(ie.line.style.active):a.attr(ie.line.style.inactive))}if("hover"===e){let e=n.getContainer(),o=e.get("children"),a=o[0];a&&(t?a.attr(ie.line.style.active):a.attr(ie.line.style.inactive))}}function he(e,t){let n=t.getEdges();if(!n||!n.length)return;let o=e.getModel();n.forEach((n=>{let a=n.getModel();if(o.id===a.attrs.start){let o=a.source;if(o){let a=e.getLinkPointByAnchor(o.index);t.updateItem(n,{source:a})}}else if(o.id===a.attrs.end){let o=a.target;if(o){let a=e.getLinkPointByAnchor(o.index);t.updateItem(n,{target:a})}}}))}var ge={setState:pe,update:he};function me(e,t,n){let o=n.getContainer(),a=o.get("children"),i=a&&a[0];if(i&&"active"===e)for(let r=0,l=a.length;r<l;r++){let e=a[r];e.cfg&&"outline"==e.cfg["name"]&&(t?e.attr({opacity:1}):e.attr({opacity:0}))}}var ue={setState:me};const ye={controllers:[[0,0,"nwse-resize"],[0,.5,"ew-resize"],[0,1,"nesw-resize"],[.5,0,"ns-resize"],[.5,1,"ns-resize"],[1,0,"nesw-resize"],[1,.5,"ew-resize"],[1,1,"nwse-resize"]],rotate:!0};var fe=ye;function be(e,t){let{id:n,width:o,height:a}=e;if(o||(o=e.size[0]),a||(a=e.size[1]),t.addShape("path",{id:n+"_shape_control_edge",name:"shapeControlEdge",attrs:{boxName:"shapeControl",name:"shapeControlEdge",x:0-o/2,y:0-a/2,width:o,height:a,path:[["M",-o/2,-a/2],["L",o/2,-a/2],["L",o/2,a/2],["L",-o/2,a/2],["Z"]],...ie.shapeControl.style["default"].edge}}),fe&&Object.prototype.hasOwnProperty.call(fe,"controllers")&&fe.controllers.length)for(let i=0,r=fe.controllers.length;i<r;i++){const[e,r,l]=fe.controllers[i],d=-o/2,s=-a/2,c=e*o+d,p=r*a+s;t.addShape("marker",{id:n+"_shape_control_point_"+i,name:"shapeControlPoint",index:i,attrs:{boxName:"shapeControl",name:"shapeControlPoint",x:c,y:p,position:{x:e,y:r},cursor:l||"pointer",...ie.shapeControl.style["default"].point}})}if(fe&&Object.prototype.hasOwnProperty.call(fe,"rotate")&&fe.rotate){const e=20,o=20;t.addShape("image",{id:n+"_shape_control_rotate",name:"shapeControlRotate",attrs:{boxName:"shapeControl",name:"shapeControlRotate",x:-e/2,y:-a/2-40,width:e,height:o,cursor:"crosshair",...ie.shapeControl.style["default"].rotate}})}}function xe(e,t,n){if("active"===e){const e=n.getContainer(),o=e.get("children");for(let n=0,a=o.length;n<a;n++){const e=o[n];if(e.attr("name"))switch(e.attr("name")){case"shapeControlPoint":t?(e.show(),e.attr(ie.shapeControl.style.active.point)):(e.attr(ie.shapeControl.style.inactive.point),e.hide());break;case"shapeControlEdge":t?(e.show(),e.attr(ie.shapeControl.style.active.edge)):(e.attr(ie.shapeControl.style.inactive.edge),e.hide());break;case"shapeControlRotate":t?(e.show(),e.attr(ie.shapeControl.style.active.rotate)):(e.attr(ie.shapeControl.style.inactive.rotate),e.hide());break;case"anchorPoint":e.hide()}}}}function ve(e,t){const{id:n,width:o,height:a}=e,i=t.findById(n+"_shape_control_edge");if(i&&i.attr({x:0-o/2,y:0-a/2,width:o,height:a,path:[["M",-o/2,-a/2],["L",o/2,-a/2],["L",o/2,a/2],["L",-o/2,a/2],["Z"]]}),fe&&Object.prototype.hasOwnProperty.call(fe,"controllers")&&fe.controllers.length)for(let r=0,l=fe.controllers.length;r<l;r++){const[e,i]=fe.controllers[r],l=-o/2,d=-a/2,s=e*o+l,c=i*a+d,p=t.findById(n+"_shape_control_point_"+r);p&&p.attr({x:s,y:c})}if(fe&&Object.prototype.hasOwnProperty.call(fe,"rotate")&&fe.rotate){const e=t.findById(n+"_shape_control_rotate");e&&e.attr({y:-a/2-40})}}function we(e,t,n){const{id:o}=e,a=t.findById(o+"_shape_control_edge");if(a&&(a.resetMatrix(),a.rotate(n)),fe&&Object.prototype.hasOwnProperty.call(fe,"controllers")&&fe.controllers.length)for(let i=0,r=fe.controllers.length;i<r;i++){const e=t.findById(o+"_shape_control_point_"+i);e&&(e.resetMatrix(),e.rotate(n))}if(fe&&Object.prototype.hasOwnProperty.call(fe,"rotate")&&fe.rotate){const e=t.findById(o+"_shape_control_rotate");e&&(e.resetMatrix(),e.rotate(n))}}var Me={draw:be,setState:xe,update:ve,rotate:we},Le={anchor:ce,edge:ge,node:ue,shapeControl:Me},Xe={shape:null,drawShape(e,t){const n=this.shapeType,o=this.getShapeStyle(e),a=t.addShape(n,{attrs:o,name:"base-shape"});return this.shape=a,a},getAnchorPoints(e){const{anchorPoints:t,width:n,height:o}=e,a=this.shape;let i=[];if(t&&t.length)for(let r=0,l=t.length;r<l;r++){let e,d;if(a&&"path"===a.get("type")){const t=a.getPoint(r/l);e=t.x,d=t.y}else{const[a,i]=t[r],l=-n/2,s=-o/2;e=a*n+l,d=i*o+s}let s=e,c=d,p=n/2+s,h=o/2+c,g=p/n,m=h/o;i.push([g,m])}return i},setState(e,t,n){Le.anchor.setState(e,t,n),Le.shapeControl.setState(e,t,n)},addEmpty(e,t){const n=e.size[0],o=e.size[1];t.addShape("rect",{attrs:{fill:"rgba(240,240,240,.1)",x:0-n/2,y:0-o/2,width:n,height:o,opacity:0,stroke:"#409EFF"},name:"empty"})},afterDraw(e,t){this.addEmpty(e,t),Le.anchor.draw(e,t),Le.shapeControl.draw(e,t)},afterUpdate(e,t){const n=t.getContainer();Le.anchor.update(e,n),Le.shapeControl.update(e,n)},update(e,t){const n=this.options,o=this.getShapeStyle(e),a=Object.assign(n,o);this.updateShape(e,t,a)},updateShape(e,t,n){const o=t.get("keyShape");o.attr({...n}),this.updateLabel(e,t);let a=t.getContainer(),i=a.get("children");const r=e.size[0],l=e.size[1];for(let s=0;s<i.length;s++){var d=i[s].cfg["name"];["empty"].indexOf(d)>-1&&i[s].attr({width:r,height:l,x:-r/2,y:-l/2})}}},ke={name:"apply",extendName:"single-shape",options:{...Xe,shapeType:"path",getShapeStyle(e){const t=this.getSize(e),n=t[0],o=t[1],a=0-n,i=0-o,r=[["M",-n/2,0],["L",-n/2,-o/2],["L",n/2,-o/2],["L",n/2,o/2],["L",-n/2,o/2],["Z"]],l=e.color,d=Object.assign({x:a,y:i,width:n,height:o,path:r,stroke:l},e.style);return d}}},Ce={name:"task",extendName:"single-shape",options:{...Xe,shapeType:"path",drawShape(e,t){const n=this.shapeType,o=this.getShapeStyle(e),a=t.addShape(n,{attrs:o});return this.shape=a,a},getShapeStyle(e){const t=this.getSize(e),n=t[0],o=t[1],a=0-n/2,i=0-o/2,r=[["M",-n/2,0],["L",-n/2,-o/2],["L",n/2,-o/2],["L",n/2,o/2],["L",-n/2,o/2],["Z"]],l=e.color,d=Object.assign({x:a,y:i,width:n,height:o,path:r,stroke:l},e.style);return d}}},ze={name:"start",extendName:"single-shape",options:{...Xe,shapeType:"circle",getShapeStyle(e){console.log(e);const t=this.getSize(e),n=t[0],o=t[1],a=0,i=0;var r=n/2;const l=e.color,d=Object.assign({x:a,y:i,width:n,height:o,r:r,stroke:l},e.style);return d}}},Pe={name:"end",extendName:"single-shape",options:{...Xe,shapeType:"circle",getShapeStyle(e){const t=this.getSize(e),n=t[0],o=t[1],a=0,i=0;var r=n/2;const l=e.color,d=Object.assign({x:a,y:i,width:n,height:o,r:r,stroke:l},e.style);return d}}},Se={name:"exclusiveGateway",extendName:"single-shape",options:{...Xe,shapeType:"path",getShapeStyle(e){const t=this.getSize(e),n=t[0],o=t[1],a=0-n/2,i=0-o/2,r=0,l=[["M",0-r,0-o/2+r],["Q",0,0-o/2,r,0-o/2+r],["L",n/2-r,0-r],["Q",n/2,0,n/2-r,r],["L",r,o/2-r],["Q",0,o/2,0-r,o/2-r],["L",-n/2+r,r],["Q",-n/2,0,-n/2+r,0-r],["Z"]],d=e.color,s=Object.assign({x:a,y:i,width:n,height:o,path:l,stroke:d},e.style);return s},afterDraw(e,t){t.icon=t.addShape("path",{attrs:{path:[["M",-8,-8],["L",8,8],["Z"],["M",8,-8],["L",-8,8],["Z"]],lineWidth:2,fill:"#1ac4c4",stroke:"#1ac4c4"}}),this.addEmpty(e,t),Le.anchor.draw(e,t),Le.shapeControl.draw(e,t)}}};const Ye={applyNode:ke,taskNode:Ce,startNode:ze,endNode:Pe,exclusiveGateway:Se};function Ne(e){Object.values(Ye).map((t=>{e.registerNode(t.name,t.options,t.extendName)}))}var Oe=n(60819),_e={name:"node-control",options:{getDefaultCfg(){return{config:{updateEdge:!0,edgeLabel:!0}}},getEvents(){return{"editor:addNode":"startAddNode","node:mousedown":"onNodeMousedown","node:mouseup":"onNodeMouseup","node:mouseenter":"onNodeMouseenter","node:mouseleave":"onNodeMouseout","node:contextmenu":"onNodeContextmenu","canvas:mousedown":"onCanvasMousedown","canvas:mousemove":"onCanvasMousemove","canvas:contextmenu":"onCanvasContextmenu","edge:mousedown":"onEdgeMousedown","edge:mouseup":"onEdgeMouseup","edge:contextmenu":"onEdgeContextmenu","edge:mouseenter":"onEdgeMouseenter","edge:mouseleave":"onEdgeMouseleave","edge:dblclick":"onEdgeDblclick",mousemove:"onMousemove",mouseup:"onMouseup"}},startAddNode(e){let t=this,n={...e,id:e.type+"_"+L(6),style:{fill:t.graph.$X.fill,stroke:t.graph.$X.lineColor,fillOpacity:t.graph.$X.fillOpacity,lineWidth:t.graph.$X.lineWidth,...ie.line.type[t.graph.$X.lineStyle],...e.style}};t.graph.addItem("node",n)},onNodeMousedown(e){let t=this,n=e.item.getModel();if(t.doClearAllStates(),t.graph.setItemState(e.item,"active",!0),!1!==n.editable&&C.emit("editor/editpanel/show",n),C.emit("editor/edgepanel/hide"),0===e.originalEvent.button){if(t.info={type:null,node:e.item,target:e.target},t.info.target&&t.info.target.attr("name"))switch(t.info.target.attr("name")){case"anchorPoint":t.info.type="drawLine";break;case"shapeControlPoint":t.info.type="shapeControlPoint"}else t.info.type="dragNode";t.info&&t.info.type&&t[t.info.type]&&t[t.info.type].start&&t[t.info.type].start.call(t,e)}},onNodeMouseup(e){let t=this,n=e.item.getModel();t.graph.emit("editor:getItem",{type:"node",id:n.id,model:n}),t.info&&t.info.type&&t[t.info.type].stop&&t[t.info.type].stop.call(t,e)},onNodeMouseenter(e){let t=this;t.graph.setItemState(e.item,"hover",!0)},onNodeMouseout(e){let t=this;e.item.hasState("selected")||t.graph.setItemState(e.item,"hover",!1)},onNodeContextmenu(e){let t=this;e.preventDefault(),t.graph.emit("editor:contextmenu",{type:"node",x:e.clientX,y:e.clientY,canvasX:e.canvasX,canvasY:e.canvasY});let n=e.item.getModel();t.graph.emit("editor:getItem",{type:"node",id:n.id,model:n})},onMousedown(){},onCanvasMousedown(e){this.doClearAllStates(),C.emit("editor/editpanel/hide"),C.emit("editor/edgepanel/hide"),e.originalEvent.button},onCanvasMousemove(){},onCanvasContextmenu(e){let t=this;e.preventDefault(),t.graph.emit("editor:contextmenu",{type:"canvas",x:e.clientX,y:e.clientY,canvasX:e.canvasX,canvasY:e.canvasY})},doClearAllStates(){let e=this;e.graph&&(e.graph.setAutoPaint(!1),e.graph.getNodes().forEach((function(t){e.graph.clearItemStates(t,["active","hover","selected"])})),e.graph.getEdges().forEach((function(t){e.graph.clearItemStates(t,["active","hover","selected"])})),e.graph.paint(),e.graph.setAutoPaint(!0))},onEdgeMousedown(e){let t=this,n=e.item.getModel();t.graph.emit("editor:getItem",{type:"edge",id:n.id,model:n}),t.doClearAllStates(),e.item&&!e.item.destroyed&&t.graph.setItemState(e.item,"active",!e.item.hasState("active")),C.emit("editor/editpanel/hide"),C.emit("editor/edgepanel/show",n)},onEdgeMouseup(e){let t=this;t.info&&"drawLine"===t.info.type&&t[t.info.type].stop.call(t,e)},onEdgeMouseenter(e){let t=this;e.item.hasState("active")||t.graph.setItemState(e.item,"hover",!0)},onEdgeMouseleave(e){let t=this;e.item.hasState("active")||t.graph.setItemState(e.item,"hover",!1)},onEdgeContextmenu(e){let t=this;e.preventDefault(),t.graph.emit("editor:contextmenu",{type:"edge",x:e.clientX,y:e.clientY,canvasX:e.canvasX,canvasY:e.canvasY})},onEdgeDblclick(e){const t=this;t.config.edgeLabel&&t.edgeLabel.create.call(t,e)},onMousemove(e){let t=this;t.info&&t.info.type&&t[t.info.type].move&&t[t.info.type].move.call(t,e)},onMouseup(e){let t=this;t.info&&("dragNode"===t.info.type||t.info.type&&t[t.info.type].stop)&&t[t.info.type].stop.call(t,e)},resetZoom(){this.graph.getEdges().map((e=>e.toFront())),this.graph.getNodes().map((e=>"groupShape"==e.getModel().type?e.toBack():e.toFront()))},dragCanvas:{dragEvent:{startX:0,startY:0},start(e){this.dragCanvas.dragEvent.startX=e.x,this.dragCanvas.dragEvent.startY=e.y},move(e){const t=e.x-this.dragCanvas.dragEvent.startX,n=e.y-this.dragCanvas.dragEvent.startY;this.graph.translate(t,n)},stop(){this.info=null}},drawLine:{isMoving:!1,currentLine:null,status:"",currentType:"",dragEvent:{startX:0,startY:0},start(e){let t,n=this,o=n.info.node.getModel(),a=n.info.node.getAnchorPoints();var i=n.graph.getEdges().filter((e=>e.getModel().source==o.id||e.getModel().target==o.id));a&&a.length&&(t=n.info.node.getLinkPoint({x:e.x,y:e.y}));var r=i.find((e=>{var o=e.getModel();return t&&t.x==o.startPoint.x&&t.y==o.startPoint.y&&(n.drawLine.currentType="source")||t.x==o.endPoint.x&&t.y==o.endPoint.y&&(n.drawLine.currentType="target")}));if(r)return n.drawLine.currentLine=r,console.log("_t.drawLine.currentLine",n.drawLine.currentLine),n.drawLine.isMoving=!0,n.drawLine.status="edit",n.drawLine.dragEvent.source=n.drawLine.currentLine.getModel().source,n.drawLine.dragEvent.target=n.drawLine.currentLine.getModel().target,void console.log("_t.drawLine.dragEvent",n.drawLine.dragEvent);n.drawLine.status="add",n.drawLine.currentType="target";var l={id:L(6),source:o.id,sourceAnchor:t?t.anchorIndex:"",target:{x:e.x,y:e.y},lineAppendWidth:20,attrs:{},label:"",style:{stroke:n.graph.$X.lineColor,lineWidth:n.graph.$X.lineWidth,...ie.line.type[n.graph.$X.lineStyle]},labelCfg:{style:{fill:"#000",fontSize:16,stroke:"#fff",lineWidth:1}},type:n.graph.$X.lineType||"line",startArrow:n.graph.$X.startArrow||!1,endArrow:n.graph.$X.endArrow||!1};n.drawLine.currentLine=n.graph.addItem("edge",l),n.drawLine.currentLine.toBack(),n.drawLine.isMoving=!0},move(e){let t=this;if(t.drawLine.isMoving&&t.drawLine.currentLine){var n={};n[t.drawLine.currentType]={x:e.x,y:e.y},t.graph.updateItem(t.drawLine.currentLine,n)}},stop(e){let t=this;if(t.drawLine.isMoving)if(t.drawLine.currentLine===e.item)t.graph.removeItem(e.item);else{let a,i="target"==t.drawLine.currentType?e.item:t.info.node,r="target"==t.drawLine.currentType?t.info.node:e.item,l="add"==t.drawLine.status?t.info.node:"target"==t.drawLine.currentType?t.drawLine.currentLine.getSource():e.item,d="add"==t.drawLine.status||"target"==t.drawLine.currentType?e.item:t.drawLine.currentLine.getTarget(),s=r.getModel(),c=i.getModel(),p=i.getAnchorPoints();p&&p.length&&(a="target"==t.drawLine.currentType?i.getLinkPoint({x:e.x,y:e.y}):r.getLinkPoint({x:e.x,y:e.y}));let h=!0;if(console.log("sourceNode",l),l.getModel().id==d.getModel().id&&(h=!1,alert("不能连自己")),t.graph.getEdges().filter((e=>e.getModel().source&&e.getModel().target)).some((e=>e.getModel().source==l.getModel().id&&e.getModel().target==d.getModel().id))&&(h=!1,alert("请勿重复连接")),"edit"==t.drawLine.status&&h){var n="target"==t.drawLine.currentType?c.id:t.drawLine.currentLine.getModel().target,o="target"==t.drawLine.currentType?t.drawLine.currentLine.getModel().source:s.id;t.graph.getEdges().some((e=>e.getModel().id!==t.drawLine.currentLine.getModel().id&&e.getModel().source==o&&e.getModel().target==n))&&(alert("已存在连线，请勿重复连接"),h=!1)}if(h){let e;e="target"==t.drawLine.currentType?{target:c.id,targetAnchor:a?a.anchorIndex:"",attrs:{start:s.id,end:c.id}}:{source:s.id,sourceAnchor:a?a.anchorIndex:"",attrs:{start:s.id,end:c.id}},t.graph.updateItem(t.drawLine.currentLine,e),t.graph.emit("editor:record","drawLine stop")}else if("add"==t.drawLine.status)t.graph.removeItem(t.drawLine.currentLine);else{let e={};e.source=t.drawLine.dragEvent.source,e.target=t.drawLine.dragEvent.target,t.graph.updateItem(t.drawLine.currentLine,e)}}t.drawLine.currentLine=null,t.drawLine.isMoving=!1,t.info=null,t.resetZoom()}},drawGroup:{isMoving:!1,marqueeNode:null,start(e){e.preventDefault(),console.log("执行 start");const t=this;t.drawGroup.isMoving=!0,t.graph.getNodes().forEach((e=>{t.graph.updateItem(e,{groupId:""})}))},move(e){console.log("执行了move");const t=this;if(t.graph.$X.isCrop&&(e.preventDefault(),t.info&&t.drawGroup.isMoving)){const{startPosition:n}=t.info,o=n.x+(e.x-n.x)/2,a=n.y+(e.y-n.y)/2,i=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);if(t.drawGroup.marqueeNode)t.graph.updateItem(t.drawGroup.marqueeNode,{x:o,y:a,width:i,height:r,size:[i,r]});else{const e={id:L(6),type:"groupShape",x:o,y:a,size:[i,r],width:i,height:r,editable:!1,shapeControl:{controllers:[[0,0,"nwse-resize"],[0,.5,"ew-resize"],[0,1,"nesw-resize"],[.5,0,"ns-resize"],[.5,1,"ns-resize"],[1,0,"nesw-resize"],[1,.5,"ew-resize"],[1,1,"nwse-resize"]],rotate:!1},style:{lineWidth:1,strokeOpacity:0,fill:"#262b30",fillOpacity:1,opacity:1,minDis:20,maxDis:40,cursor:"default"}};t.drawGroup.marqueeNode=t.graph.addItem("node",e),t.drawGroup.marqueeNode.toBack()}}},stop(){const e=this;if(e.info&&e.drawGroup.isMoving&&e.drawGroup.marqueeNode){const{minX:t,maxX:n,minY:o,maxY:a}=e.drawGroup.marqueeNode.getBBox(),i=[],r=L(),l=e.drawGroup.marqueeNode.get("id");e.graph.getNodes().forEach((d=>{const s=d.getModel(),{id:c}=s,{minX:p,maxX:h,minY:g,maxY:m}=d.getBBox();c!==l&&p>t&&h<n&&g>o&&m<a&&(e.graph.updateItem(d,{groupId:r}),e.graph.setItemState(d,"active",!0),i.push({type:"node",id:c,model:d.getModel()}))}))}e.drawGroup.isMoving=!1,e.drawGroup.marqueeNode=null}},shapeControlPoint:{isMoving:!1,isProportional:!1,originNodeModel:null,start(e){const t=this,n=t.info.node.getModel();t.shapeControlPoint.originNodeModel={x:n.x,y:n.y,startX:e.x,startY:e.y,minWidth:n.minWidth,minHeight:n.minHeight,size:n.size||[]},t.shapeControlPoint.isMoving=!0,t.shapeControlPoint.isProportional=["square","circle","bidirectional-arrow","arrow"].includes(n.type)},move(e){const t=this,n=t.shapeControlPoint.originNodeModel;if(t.info.node&&t.info.target&&n&&t.shapeControlPoint.isMoving){const o=t.info.node.getModel(),a=t.info.target.attr("position")||null,i={x:n.x,y:n.y,size:[...o.size]},r=o.width,l=o.height;if(!a)return;{const o=[1-a.x,1-a.y],d=n.x-r/2,s=n.y-l/2,c={x:o[0]*r+d,y:o[1]*l+s};if(t.shapeControlPoint.isProportional?i.size[0]=i.size[1]=Math.abs(c.x-e.x):.5==a.x&&1==a.y?(i.size[1]=n.size[1]+e.y-n.startY,i.y=n.y+(e.y-n.startY)/2):1==a.x&&.5==a.y?(i.size[0]=n.size[0]+e.x-n.startX,i.x=n.x+(e.x-n.startX)/2):1==a.x&&1==a.y?(i.size[0]=n.size[0]+e.x-n.startX,i.x=n.x+(e.x-n.startX)/2,i.size[1]=n.size[1]+e.y-n.startY,i.y=n.y+(e.y-n.startY)/2):0==a.x&&0==a.y?(i.size[1]=n.size[1]-e.y+n.startY,i.y=n.y+(e.y-n.startY)/2,i.size[0]=n.size[0]-e.x+n.startX,i.x=n.x+(e.x-n.startX)/2):.5==a.x&&0==a.y?(i.size[1]=n.size[1]-e.y+n.startY,i.y=n.y+(e.y-n.startY)/2):1==a.x&&0==a.y?(i.size[1]=n.size[1]-e.y+n.startY,i.y=n.y+(e.y-n.startY)/2,i.size[0]=n.size[0]+e.x-n.startX,i.x=n.x+(e.x-n.startX)/2):0==a.x&&.5==a.y?(i.size[0]=n.size[0]-e.x+n.startX,i.x=n.x+(e.x-n.startX)/2):0==a.x&&1==a.y&&(i.size[1]=n.size[1]+e.y-n.startY,i.y=n.y+(e.y-n.startY)/2,i.size[0]=n.size[0]-e.x+n.startX,i.x=n.x+(e.x-n.startX)/2),i.size[0]<n.minWidth||i.size[1]<n.minHeight)return}i.size[0]=parseInt(i.size[0]),i.size[1]=parseInt(i.size[1]),i.width=i.size[0],i.height=i.size[1],t.info.attrs=i;const d=t.info.node.getContainer();Le.anchor.update({...t.info.node.getModel(),width:i.size[0],height:i.size[1]},d),Le.shapeControl.update({...t.info.node.getModel(),width:i.size[0],height:i.size[1]},d),t.graph.updateItem(t.info.node,i),t.graph.refreshItem(t.info.node)}},stop(){const e=this;if(e.info.node&&e.info.attrs&&e.shapeControlPoint.originNodeModel&&e.shapeControlPoint.isMoving){const t=e.info.attrs,n=e.info.node.getContainer();Le.anchor.update({...e.info.node.getModel(),width:t.size[0],height:t.size[1]},n),Le.shapeControl.update({...e.info.node.getModel(),width:t.size[0],height:t.size[1]},n),e.graph.updateItem(e.info.node,t),e.graph.emit("editor:record","shapeControlPoint stop")}e.shapeControlPoint.originNodeModel=null,e.shapeControlPoint.isMoving=!1,e.info=null}},dragNode:{groupNodes:[],status:null,start(e){let t=this;t.info.eventTarget={estartX:e.x,estartY:e.y},t.dragNode.status="dragNode";var n=t.info.node.getModel();if(t.info.eventTarget.startX=n.x,t.info.eventTarget.startY=n.y,"groupShape"==n.type){var o=n.x-n.width/2,a=n.x+n.width/2,i=n.y-n.height/2,r=n.y+n.height/2;t.dragNode.groupNodes=t.graph.getNodes().filter((e=>{var t=e.getModel();return o<=t.x-t.width/2&&a>=t.x+t.width/2&&i<=t.y-t.height/2&&r>=t.y+t.height/2})).map((e=>({startX:e.getModel().x,startY:e.getModel().y,node:e,model:e.getModel()})))}},move(e){e.preventDefault();let t=this;if("dragNode"===t.dragNode.status&&t.info.node){let n={x:t.info.eventTarget.startX+e.x-t.info.eventTarget.estartX,y:t.info.eventTarget.startY+e.y-t.info.eventTarget.estartY};t.graph.updateItem(t.info.node,n),t.dragNode.groupNodes.length&&t.dragNode.groupNodes.forEach((n=>{let o={x:n.startX+e.x-t.info.eventTarget.estartX,y:n.startY+e.y-t.info.eventTarget.estartY};t.graph.updateItem(n.node,o)}))}},stop(){let e=this;if(e.info&&e.info.node){e.info.eventTarget=null;let t=e.info.node.getModel();e.graph.emit("editor:getItem",{type:"node",id:t.id,model:t})}e.dragNode.groupNodes=[],e.graph.emit("editor:record","dragnode stop"),e.dragNode.clear.call(e)},clear(){let e=this;e.dragNode.status=null,e.info=null}},edgeLabel:{create(e){const t=this,n=t.graph.get("canvas"),o=e.item,a=o.getModel(),{label:i,source:r,sourceAnchor:l,target:d,targetAnchor:s}=a,c=t.graph.findById(r),p=t.graph.findById(d),h=c.getAnchorPoints(),g=p.getAnchorPoints(),m=this.graph.getCanvasByPoint(h[l].x,h[l].y),u=this.graph.getCanvasByPoint(g[s].x,g[s].y);let y,f;const b=40,x=100;let v=40;const w=20,M=Math.abs(u.x-m.x);M<b&&(v=b),M>x&&(v=x),y=m.x<u.x?m.x+M/2-v/2+"px":u.x+M/2-v/2+"px",f=m.y<u.y?m.y+Math.abs(u.y-m.y)/2-w/2+"px":u.y+Math.abs(u.y-m.y)/2-w/2+"px";const L=n.get("el"),X=L.parentNode.querySelector(".inputBox");if(X){X.value=i,Oe.Z(X,{display:"inline-block",position:"absolute",left:y,top:f,width:v+"px",height:w+"px",lineHeight:w+"px",textAlign:"center",overflow:"hidden",fontSize:"14px"}),X.focus&&X.focus();const e=function(){t.graph.updateItem(o,{label:X.value}),X.removeEventListener("blur",e),Oe.Z(X,{display:"none"})};X.addEventListener("blur",e)}}}}};const Ee={nodeControl:_e};function Ae(e){Object.values(Ee).map((t=>{e.registerBehavior(t.name,t.options)}))}var Ie={draw(e,t){const{startPoint:n,endPoint:o}=e,a=t.addShape("path",{className:"edge-shape",attrs:{...e,path:[["M",n.x,n.y],["L",o.x,o.y]]}});return a},setState(e,t,n){Le.edge.setState(e,t,n)}},Te={name:"a-line",extendName:"line",options:{...Ie}},Be={name:"x-cubic",extendName:"cubic",options:{...Ie}};const De=function(e,t,n,o,a=10){const i=e&&e.getBBox?e.getBBox():Fe(n),r=t&&t.getBBox?t.getBBox():Fe(o),l=Ze(i,a),d=Ze(r,a),s=je(l,n),c=je(d,o);let p=We(l,d,s,c);Re(p,l),Re(p,d);let h=Je(p,s,c,l,d);return h},Fe=function(e){return{centerX:e.x,centerY:e.y,minX:e.x,minY:e.y,maxX:e.x,maxY:e.y,height:0,width:0}},Ze=function(e,t){return 0===e.width&&0===e.height?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},je=function(e,t){return Math.abs(t.x-e.centerX)/e.width>Math.abs(t.y-e.centerY)/e.height?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},We=function(e,t,n,o){let a=$e(n,o),i=Ge(e,t),r=Ge(e,a),l=Ge(t,a),d=[...qe(r),...qe(l),...qe(i)];const s={x:i.centerX,y:i.centerY};let c=[i,r,l,a];return c.forEach((e=>{d=[...d,...He(e,s)]})),d.push({x:n.x,y:o.y}),d.push({x:o.x,y:n.y}),d},$e=function(e,t){const n=Math.min(e.x,t.x),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y),i=Math.max(e.y,t.y);return{centerX:(n+o)/2,centerY:(a+i)/2,maxX:o,maxY:i,minX:n,minY:a,height:i-a,width:o-n}},Ge=function(e,t){const n=Math.min(e.minX,t.minX),o=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),i=Math.max(e.maxY,t.maxY);return{centerX:(n+a)/2,centerY:(o+i)/2,minX:n,minY:o,maxX:a,maxY:i,height:i-o,width:a-n}},qe=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},He=function(e,t){let n=[];return t.x<e.minX||t.x>e.maxX||(n=[...n,{x:t.x,y:e.minY},{x:t.x,y:e.maxY}]),t.y<e.minY||t.y>e.maxY||(n=[...n,{x:e.minX,y:t.y},{x:e.maxX,y:t.y}]),n},Re=function(e,t){return e.filter((e=>e.x<=t.minX||e.x>=t.maxX||e.y<=t.minY||e.y>=t.maxY))},Qe=function(e,t,n){for(let o=0;o<e.length;o++){const a=e[o];if(t.x===n.x&&a.minX<t.x&&a.maxX>t.x){if(t.y<a.maxY&&n.y>=a.maxY||n.y<a.maxY&&t.y>=a.maxY)return!0}else if(t.y===n.y&&a.minY<t.y&&a.maxY>t.y&&(t.x<a.maxX&&n.x>=a.maxX||n.x<a.maxX&&t.x>=a.maxX))return!0}return!1},Ue=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Je=function(e,t,n,o,a){const i=[t],r=[];e.forEach((e=>{e.id=e.x+"-"+e.y}));let l,d=[];e.forEach((e=>{d.includes((t=>t.id===e.id))||d.push(e)})),e=[...d,n];while(i.length>0){let t;if(i.forEach((e=>{e.parent||(e.f=0),t||(t=e),e.f<t.f&&(t=e)})),t.x===n.x&&t.y===n.y){l=t;break}i.splice(i.findIndex((e=>e.x===t.x&&e.y===t.y)),1),r.push(t);const d=e.filter((e=>(e.x===t.x||e.y===t.y)&&!(e.x===t.x&&e.y===t.y)&&!Qe([o,a],t,e)));d.forEach((e=>{const o=i.find((t=>t.x===e.x&&t.y===e.y)),l=Ue(e,t);if(!r.find((t=>t.x===e.x&&t.y===e.y)))if(o)e.g>l&&(e.parent=t,e.g=l,e.f=e.g+e.h);else{e.parent=t,e.g=l;let o=Ue(e,n);Qe([a],e,n)&&(o+=a.width/2+a.height/2),e.h=o,e.f=e.g+e.h,i.push(e)}}))}if(l){const e=[];e.push({x:l.x,y:l.y});while(l.parent)l=l.parent,e.push({x:l.x,y:l.y});return e.reverse()}return[]};var Ke={name:"a-broken",extendName:"single-line",options:{...Ie,draw(e,t){const{startPoint:n,endPoint:o}=e,a=this.getControlPoints(e);let i=[n];a&&(a instanceof Array?i=i.concat(a):i.push(a)),i.push(o);let r=this.getPath(i);const l=t.addShape("path",{className:"edge-shape",attrs:{...e,...e.style,path:r}});return l},getPath(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n];if(0===n)t.push(["M",o.x,o.y]);else if(n===e.length-1)t.push(["L",o.x,o.y]);else{const a=e[n-1];let i=e[n+1],r=5;(Math.abs(o.y-a.y)>r||Math.abs(o.x-a.x)>r)&&(a.x===o.x?t.push(["L",o.x,o.y>a.y?o.y-r:o.y+r]):a.y===o.y&&t.push(["L",o.x>a.x?o.x-r:o.x+r,o.y]));const l=Math.abs(o.y-i.y),d=Math.abs(o.x-i.x);l>0&&l<r?r=l:d>0&&d<r&&(r=d),a.x!==i.x&&i.x===o.x?t.push(["Q",o.x,o.y,o.x,o.y>i.y?o.y-r:o.y+r]):a.y!==i.y&&i.y===o.y&&t.push(["Q",o.x,o.y,o.x>i.x?o.x-r:o.x+r,o.y])}}return t},getControlPoints(e){return e.sourceNode?De(e.sourceNode,e.targetNode,e.startPoint,e.endPoint,20):e.controlPoints}}};const Ve={line:Te,cubic:Be,broken:Ke};function et(e){Object.values(Ve).map((t=>{e.registerEdge(t.name,t.options,t.extendName)}))}Ne(K.ZP),et(K.ZP),Ae(K.ZP);var tt=K.ZP,nt={fill:"#FFFFFF",lineColor:"#999999",lineWidth:1,lineType:"a-broken",lineStyle:"solid",startArrow:!1,endArrow:!0,fillOpacity:1,lineAppendWidth:30};const ot=[{name:"groupline",label:"框选",type:"crop",icon:" el-icon-crop",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!1,target:[]}},{name:"undo",label:"撤销",type:"normal",icon:"iconfont-flow icon-undo",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:[]}},{name:"redo",label:"重做",type:"normal",icon:"iconfont-flow icon-redo",enable:!0,disabled:!1,mode:["edit"],divider:!0,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:[]}},{name:"copy",label:"复制",type:"normal",icon:"iconfont-flow icon-copy",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"mod+c",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["node","edge"]}},{name:"paste",label:"粘贴",type:"normal",icon:"iconfont-flow icon-paste",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"mod+v",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas","node","edge"]}},{name:"delete",label:"删除",type:"normal",icon:"iconfont-flow icon-delete",enable:!0,disabled:!1,mode:["edit"],divider:!0,shortcuts:"del",toolbar:{enable:!1,position:"center"},contextmenu:{enable:!0,target:["node","edge"]}},{name:"clear",label:"清空",type:"normal",icon:"iconfont-flow icon-clear",enable:!0,disabled:!1,mode:["edit"],divider:!0,shortcuts:"ctrl+shift+c",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas"]}},{name:"zoom",label:"缩放",type:"dropdown-list",icon:"iconfont-flow icon-zoom",enable:!0,disabled:!1,mode:["edit","preview"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!1,target:[]},selected:0,lockLabel:!0,children:[{name:"25%",label:"25%",lang:"",type:"normal",icon:"",data:.25,enable:!0,disabled:!1,divider:!1},{name:"50%",label:"50%",lang:"",type:"normal",icon:"",data:.5,enable:!0,disabled:!1,divider:!1},{name:"75%",label:"75%",lang:"",type:"normal",icon:"",data:.75,enable:!0,disabled:!1,divider:!1},{name:"100%",label:"100%",lang:"",type:"normal",icon:"",data:1,enable:!0,disabled:!1,divider:!1},{name:"125%",label:"125%",lang:"",type:"normal",icon:"",data:1.25,enable:!0,disabled:!1,divider:!1},{name:"150%",label:"150%",lang:"",type:"normal",icon:"",data:1.5,enable:!0,disabled:!1,divider:!1},{name:"200%",label:"200%",lang:"",type:"normal",icon:"",data:2,enable:!0,disabled:!1,divider:!1},{name:"300%",label:"300%",lang:"",type:"normal",icon:"",data:3,enable:!0,disabled:!1,divider:!1},{name:"400%",label:"400%",lang:"",type:"normal",icon:"",data:4,enable:!0,disabled:!1,divider:!1}]},{name:"zoomIn",label:"放大",type:"normal",icon:"iconfont-flow icon-zoom-in",enable:!0,disabled:!1,mode:["edit","preview"],divider:!1,shortcuts:["mod+=","mod+plus"],toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas","node","edge"]}},{name:"zoomOut",label:"缩小",type:"normal",icon:"iconfont-flow icon-zoom-out",enable:!0,disabled:!1,mode:["edit","preview"],divider:!1,shortcuts:"mod+-",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas","node","edge"]}},{name:"fit",label:"适应屏幕",type:"normal",icon:"iconfont-flow icon-fit",enable:!0,disabled:!1,mode:["edit","preview"],divider:!1,shortcuts:"mod+0",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas","node","edge"]}},{name:"actualSize",label:"实际大小",type:"normal",icon:"iconfont-flow icon-actual-size",enable:!0,disabled:!1,mode:["edit","preview"],divider:!0,shortcuts:"mod+1",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas","node","edge"]}},{name:"fill",label:"填充颜色",type:"dropdown-color-picker",icon:"iconfont-flow icon-fill",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["node","edge"]}},{name:"lineColor",label:"线条颜色",type:"dropdown-color-picker",icon:"iconfont-flow icon-line-color",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["node","edge"]}},{name:"lineWidth",label:"线条宽度",type:"dropdown-list",icon:"iconfont-flow icon-line-width",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["node","edge"]},selected:0,lockLabel:!0,children:[{name:1,label:"1px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:2,label:"2px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:3,label:"3px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:4,label:"4px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:5,label:"5px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:6,label:"6px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:7,label:"7px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:8,label:"8px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:9,label:"9px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1},{name:10,label:"10px",lang:"",type:"normal",icon:"",enable:!0,disabled:!1,divider:!1}]},{name:"lineStyle",label:"线条样式",type:"dropdown-list",icon:"iconfont-flow icon-line-style",enable:!0,disabled:!1,mode:["edit"],divider:!0,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["node","edge"]},selected:0,lockLabel:!1,children:[{name:"solid",label:"solid",lang:"",type:"normal",icon:"iconfont-flow icon-solid",enable:!0,disabled:!1,divider:!1},{name:"dashed",label:"dashed",lang:"",type:"normal",icon:"iconfont-flow icon-dashed",enable:!0,disabled:!1,divider:!1},{name:"dot",label:"dot",lang:"",type:"normal",icon:"iconfont-flow icon-dot",enable:!0,disabled:!1,divider:!1}]},{name:"lineType",label:"线条类型",type:"dropdown-list",icon:"",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["edge"]},selected:0,lockLabel:!1,children:[{name:"a-line",label:"line",lang:"",type:"normal",icon:"iconfont-flow icon-flow-line",enable:!0,disabled:!1,divider:!1},{name:"a-broken",label:"broken",lang:"",type:"normal",icon:"iconfont-flow icon-flow-broken",enable:!0,disabled:!1,divider:!1},{name:"x-cubic",label:"cubic",lang:"",type:"normal",icon:"iconfont-flow icon-flow-curve",enable:!0,disabled:!1,divider:!1}]},{name:"startArrow",label:"起点",type:"dropdown-list",icon:"",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["edge"]},selected:0,lockLabel:!1,children:[{name:"none",label:"none",lang:"",type:"normal",icon:"iconfont-flow icon-solid",style:{},data:!1,enable:!0,disabled:!1,divider:!1},{name:"normalArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-normal",style:{},data:!0,enable:!0,disabled:!1,divider:!1},{name:"triangleArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-triangle",style:{},data:{path:K.ZP.Arrow.triangle(10,20,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"veeArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-vee",style:{},data:{path:K.ZP.Arrow.vee(10,20,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"circleArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-circle",style:{},data:{path:K.ZP.Arrow.circle(10,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"rectArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-rect",style:{},data:{path:K.ZP.Arrow.rect(10,20,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"triangleRectArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-triangle-rect",style:{},data:{path:K.ZP.Arrow.triangleRect(15,15,15,3,5,0),d:0},enable:!0,disabled:!1,divider:!1}]},{name:"endArrow",label:"终点",type:"dropdown-list",icon:"",enable:!0,disabled:!1,mode:["edit"],divider:!0,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["edge"]},selected:0,lockLabel:!1,children:[{name:"none",label:"none",lang:"",type:"normal",icon:"iconfont-flow icon-solid",style:{},data:!1,enable:!0,disabled:!1,divider:!1},{name:"normalArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-normal",style:{},data:!0,enable:!0,disabled:!1,divider:!1},{name:"triangleArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-triangle",style:{},data:{path:K.ZP.Arrow.triangle(10,20,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"veeArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-vee",style:{},data:{path:K.ZP.Arrow.vee(10,20,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"circleArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-circle",style:{},data:{path:K.ZP.Arrow.circle(10,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"rectArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-rect",style:{},data:{path:K.ZP.Arrow.rect(10,20,0),d:0},enable:!0,disabled:!1,divider:!1},{name:"triangleRectArrow",label:"",lang:"",type:"normal",icon:" edge-arrow edge-arrow-triangle-rect",style:{},data:{path:K.ZP.Arrow.triangleRect(15,15,15,3,5,0),d:0},enable:!0,disabled:!1,divider:!1}]},{name:"toFront",label:"置于顶层",type:"normal",icon:"iconfont-flow icon-to-front",enable:!0,disabled:!1,mode:["edit"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["node","edge"]}},{name:"toBack",label:"置于底层",type:"normal",icon:"iconfont-flow icon-to-back",enable:!0,disabled:!1,mode:["edit"],divider:!0,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["node","edge"]}},{name:"fullscreen",label:"全屏",type:"normal",icon:"iconfont-flow icon-full-screen",enable:!0,disabled:!1,mode:["edit","preview"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas","node","edge"]}},{name:"download",label:"下载",type:"dropdown-list",icon:"iconfont-flow icon-download",enable:!0,disabled:!1,mode:["edit","preview"],divider:!1,shortcuts:"",toolbar:{enable:!0,position:"center"},contextmenu:{enable:!0,target:["canvas","node","edge"]},selected:0,lockLabel:!0,children:[{name:"image",label:"Image",lang:"",type:"normal",icon:"iconfont-flow icon-image",style:{},data:!1,enable:!0,disabled:!1,divider:!1},{name:"json",label:"Json",lang:"",type:"normal",icon:"iconfont-flow icon-json",style:{},data:!1,enable:!0,disabled:!1,divider:!1}]}];var at=ot,it={$X:nt,materials:T,toolList:at};function rt(e){let t=document.querySelector("#sketchpad"),n=document.querySelector("#minimap");const o=new tt.Grid,a=new tt.Minimap({container:n,size:[n.offsetWidth,n.offsetHeight]}),i=new tt.Graph({plugins:[o,a],container:t,width:t.clientWidth,height:t.clientHeight,fitViewPadding:20,autoPaint:!0,groupByTypes:!1,modes:{edit:["zoom-canvas","drag-canvas",{type:"node-control",updateEdge:!0,enableNodeLabel:!0,enableEdgeLabel:!0}],preview:["drag-canvas","zoom-canvas"]}});return i.$X=it.$X,i.$C={...ie},i.setMode("edit"),e&&(i.data(e),i.render(),setTimeout((()=>{i.getNodes().forEach((e=>{e.toFront(),"groupShape"==e.getModel().type&&e.toBack()}))}))),window.addEventListener("resize",(()=>{setTimeout((()=>{i.changeSize(t.clientWidth,t.clientHeight)}))})),i}function lt(e){const t=t=>{e.emit("editor:addNode",t)};return{editorAddNode:t}}const dt={class:"wd-container"};var st={setup(e){return(0,a.bv)((()=>{const e=rt(),{editorAddNode:t}=lt(e);C.on("editor/add/node",t)})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",dt,[(0,a.Wm)(g),(0,a.Wm)(W),(0,a.Wm)(J)]))}};const ct=(0,c.Z)(st,[["__scopeId","data-v-1dfbf082"]]);var pt=ct;const ht={class:"container"};var gt={setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)("div",ht,[(0,a.Wm)(pt)]))}};const mt=gt;var ut=mt,yt=n(9749),ft=(0,yt.MT)({state:{},mutations:{},actions:{},modules:{}});const bt=(0,o.ri)(ut);bt.use(ft).mount("#app")},17628:function(e,t,n){e.exports=n.p+"img/apply.a820024a..svg"},97570:function(e,t,n){e.exports=n.p+"img/end.278e7018..svg"},35137:function(e,t,n){e.exports=n.p+"img/exclusive-gateway.e1b75f30..svg"},92294:function(e,t,n){e.exports=n.p+"img/start.c91ae3dd..svg"},66180:function(e,t,n){e.exports=n.p+"img/task.3f456349..svg"}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var l=!0,d=0;d<o.length;d++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[d])}))?o.splice(d--,1):(l=!1,i<r&&(r=i));if(l){e.splice(c--,1);var s=a();void 0!==s&&(t=s)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p=""}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,r=o[0],l=o[1],d=o[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(d)var c=d(n)}for(t&&t(o);s<r.length;s++)i=r[s],n.o(e,i)&&e[i]&&e[i][0](),e[r[s]]=0;return n.O(c)},o=self["webpackChunkworkflow_designer"]=self["webpackChunkworkflow_designer"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(95069)}));o=n.O(o)})();
//# sourceMappingURL=app.3c217f80.js.map